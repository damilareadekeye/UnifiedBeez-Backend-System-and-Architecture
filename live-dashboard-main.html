<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Dashboard - Main Dashboard & Settings | UnifiedBeez Architecture</title>
    <link rel="stylesheet" href="assets/live-dashboard-styles.css">
</head>
<body>
    <!-- HEADER -->
    <div class="header">
        <div class="header-content">
            <div class="logo-section">
                <div class="logo">üêù</div>
                <div>
                    <h1>UnifiedBeez Backend Architecture</h1>
                    <p class="subtitle">Live Dashboard - Main Dashboard & Settings</p>
                </div>
            </div>
            <a href="index.html" class="back-button">‚Üê Back to Index</a>
        </div>
    </div>

    <!-- NAVIGATION -->
    <div class="nav-container">
        <div class="nav-scroll">
            <a href="#frame1" class="nav-item">Frame 1: Overview</a>
            <a href="#frame2" class="nav-item">Frame 2: Dashboard Insights</a>
            <a href="#frame3" class="nav-item">Frame 3: Settings Architecture</a>
            <a href="#frame4" class="nav-item">Frame 4: Brand Kit System</a>
            <a href="#frame5" class="nav-item">Frame 5: Beezora Configuration</a>
            <a href="#frame6" class="nav-item">Frame 6: Billing & Subscriptions</a>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="container">

        <!-- FRAME 1: OVERVIEW -->
        <div id="frame1" class="frame">
            <h2>üìä FRAME 1: Main Dashboard & Settings Overview</h2>

            <h3>üéØ Purpose</h3>
            <p>
                The Main Dashboard & Settings module provides the central command center for UnifiedBeez users.
                It includes the main dashboard with insights and KPIs, comprehensive settings management,
                Brand Kit customization, Beezora AI personality configuration, subscription and billing management,
                team collaboration features, and notification preferences.
            </p>

            <h3>‚ú® Core Features</h3>
            <div class="grid-3">
                <div class="card">
                    <h4>üìä Dashboard Insights</h4>
                    <ul>
                        <li>Real-time KPI widgets</li>
                        <li>Customizable dashboard</li>
                        <li>Activity feed</li>
                        <li>Quick actions</li>
                        <li>Recent conversations</li>
                        <li>Performance charts</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>‚öôÔ∏è Settings Hub</h4>
                    <ul>
                        <li>Account settings</li>
                        <li>Channel connections</li>
                        <li>Security preferences</li>
                        <li>Notification settings</li>
                        <li>Team management</li>
                        <li>API access</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>üé® Brand Kit</h4>
                    <ul>
                        <li>Logo & brand colors</li>
                        <li>Email templates</li>
                        <li>WhatsApp templates</li>
                        <li>Signature customization</li>
                        <li>White-label options</li>
                    </ul>
                </div>
            </div>

            <div class="grid-3">
                <div class="card">
                    <h4>ü§ñ Beezora AI Config</h4>
                    <ul>
                        <li>Personality settings</li>
                        <li>Knowledge base</li>
                        <li>Auto-response rules</li>
                        <li>Training data</li>
                        <li>Response tone</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>üí≥ Billing & Plans</h4>
                    <ul>
                        <li>Subscription management</li>
                        <li>Usage tracking</li>
                        <li>Invoice history</li>
                        <li>Add-ons purchase</li>
                        <li>Plan upgrades</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>üë• Team Collaboration</h4>
                    <ul>
                        <li>Team member management</li>
                        <li>Role-based access</li>
                        <li>Permission controls</li>
                        <li>Activity tracking</li>
                        <li>Team notifications</li>
                    </ul>
                </div>
            </div>

            <h3>üìä Dashboard KPIs</h3>
            <table>
                <thead>
                    <tr>
                        <th>KPI Category</th>
                        <th>Metrics Tracked</th>
                        <th>Data Source</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Conversations</strong></td>
                        <td>Total, Active, Unread, Response time</td>
                        <td>Inbox module</td>
                    </tr>
                    <tr>
                        <td><strong>Contacts</strong></td>
                        <td>Total contacts, New this week, Active lists</td>
                        <td>CRM module</td>
                    </tr>
                    <tr>
                        <td><strong>Automations</strong></td>
                        <td>Active automations, Executions today, Success rate</td>
                        <td>Automations module</td>
                    </tr>
                    <tr>
                        <td><strong>Team Performance</strong></td>
                        <td>Messages sent, Avg response time, Tasks completed</td>
                        <td>Multiple modules</td>
                    </tr>
                    <tr>
                        <td><strong>Channel Activity</strong></td>
                        <td>Messages by channel, Active channels, Health status</td>
                        <td>Channel integrations</td>
                    </tr>
                </tbody>
            </table>

            <div class="see-also">
                <h3>üîó See Also</h3>
                <p>
                    <a href="#frame2">‚Üí Frame 2: Dashboard Insights & KPIs</a> |
                    <a href="#frame3">‚Üí Frame 3: Settings Architecture</a> |
                    <a href="#frame4">‚Üí Frame 4: Brand Kit System</a>
                </p>
            </div>
        </div>

        <!-- FRAME 2: DASHBOARD INSIGHTS -->
        <div id="frame2" class="frame">
            <h2>üìà FRAME 2: Dashboard Insights & KPIs</h2>

            <h3>üèóÔ∏è Dashboard Service Architecture</h3>

            <div style="background: linear-gradient(135deg, #FFF3E0 0%, #FFE0B2 100%); border: 3px solid #F57C00; border-radius: 12px; padding: 30px; margin: 25px 0;">
                <h4 style="color: #1A4D2E; text-align: center; margin-bottom: 30px; font-size: 1.3rem;">
                    Dashboard Service Architecture
                </h4>

                <!-- DashboardService -->
                <div style="background: white; border: 3px solid #F57C00; border-radius: 10px; padding: 20px; margin-bottom: 20px;">
                    <h5 style="color: #1A4D2E; margin-bottom: 15px; font-size: 1.1rem; text-align: center;">üìä DashboardService</h5>
                    <ul style="color: #2C3E50; font-size: 0.9rem; line-height: 1.8; margin: 0; padding-left: 20px;">
                        <li>getInsights()</li>
                        <li>getKPIs()</li>
                        <li>getActivityFeed()</li>
                    </ul>
                </div>

                <div style="text-align: center; font-size: 2rem; color: #2D6A4F; margin: 15px 0;">‚Üì</div>

                <!-- Data Aggregation Layer -->
                <div style="background: white; border: 3px solid #FF9800; border-radius: 10px; padding: 20px; margin-bottom: 20px;">
                    <h5 style="color: #1A4D2E; margin-bottom: 15px; font-size: 1.1rem; text-align: center;">üìà Data Aggregation Layer</h5>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 10px;">
                        <div style="background: #FFF3E0; padding: 12px; border-radius: 6px; text-align: center; color: #1A4D2E; font-size: 0.9rem;">InboxMetrics</div>
                        <div style="background: #FFF3E0; padding: 12px; border-radius: 6px; text-align: center; color: #1A4D2E; font-size: 0.9rem;">CRMMetrics</div>
                        <div style="background: #FFF3E0; padding: 12px; border-radius: 6px; text-align: center; color: #1A4D2E; font-size: 0.9rem;">AutomationMetrics</div>
                        <div style="background: #FFF3E0; padding: 12px; border-radius: 6px; text-align: center; color: #1A4D2E; font-size: 0.9rem;">TeamMetrics</div>
                    </div>
                </div>

                <div style="text-align: center; font-size: 2rem; color: #2D6A4F; margin: 15px 0;">‚Üì</div>

                <!-- Data Stores -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 15px;">
                    <div style="background: white; border: 3px solid #FFB74D; border-radius: 10px; padding: 20px; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 8px;">üóÑÔ∏è</div>
                        <h5 style="color: #1A4D2E; margin: 0; font-size: 1rem;">PostgreSQL</h5>
                        <p style="color: #666; font-size: 0.85rem; margin: 5px 0 0 0;">(Source)</p>
                    </div>
                    <div style="background: white; border: 3px solid #FFB74D; border-radius: 10px; padding: 20px; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 8px;">‚ö°</div>
                        <h5 style="color: #1A4D2E; margin: 0; font-size: 1rem;">Redis</h5>
                        <p style="color: #666; font-size: 0.85rem; margin: 5px 0 0 0;">(Cache)</p>
                    </div>
                    <div style="background: white; border: 3px solid #FFB74D; border-radius: 10px; padding: 20px; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 8px;">üöÄ</div>
                        <h5 style="color: #1A4D2E; margin: 0; font-size: 1rem;">ElastiCache</h5>
                        <p style="color: #666; font-size: 0.85rem; margin: 5px 0 0 0;">(Real-time)</p>
                    </div>
                </div>
            </div>

            <h3>üìä Widget Types</h3>

            <div class="grid-2">
                <div class="card">
                    <h4>Metric Widgets</h4>
                    <ul>
                        <li><strong>Single Value:</strong> Total contacts, Active conversations</li>
                        <li><strong>Comparison:</strong> This week vs last week</li>
                        <li><strong>Percentage:</strong> Automation success rate</li>
                        <li><strong>Trend:</strong> Growth indicators (‚Üë/‚Üì)</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>Chart Widgets</h4>
                    <ul>
                        <li><strong>Line Chart:</strong> Messages over time</li>
                        <li><strong>Bar Chart:</strong> Messages by channel</li>
                        <li><strong>Pie Chart:</strong> Contact distribution</li>
                        <li><strong>Heatmap:</strong> Activity by hour/day</li>
                    </ul>
                </div>
            </div>

            <h3>üì° API Endpoints (Dashboard)</h3>

            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Endpoint</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/dashboard/insights</code></td>
                            <td>Get all dashboard insights & KPIs</td>
                        </tr>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/dashboard/kpis/:metric</code></td>
                            <td>Get specific KPI with historical data</td>
                        </tr>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/dashboard/activity-feed</code></td>
                            <td>Recent activity across all modules</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/dashboard/widgets</code></td>
                            <td>Customize dashboard layout</td>
                        </tr>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/dashboard/quick-actions</code></td>
                            <td>Available quick actions for user</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="see-also">
                <h3>üîó See Also</h3>
                <p>
                    <a href="#frame3">‚Üí Frame 3: Settings Architecture</a>
                </p>
            </div>
        </div>

        <!-- FRAME 3: SETTINGS ARCHITECTURE -->
        <div id="frame3" class="frame">
            <h2>‚öôÔ∏è FRAME 3: Settings Architecture</h2>

            <h3>üèóÔ∏è Settings Hierarchy</h3>
            <div style="background: linear-gradient(135deg, #E8F5E9 0%, #B2DFDB 100%); border: 3px solid #2D6A4F; border-radius: 12px; padding: 30px; margin: 25px 0;">
                <h4 style="color: #1A4D2E; text-align: center; margin-bottom: 30px; font-size: 1.3rem;">
                    ‚öôÔ∏è Settings Structure - Hierarchical Organization
                </h4>

                <!-- ORGANIZATION SETTINGS -->
                <div style="background: white; border-left: 5px solid #2D6A4F; border-radius: 8px; padding: 20px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(45, 106, 79, 0.15);">
                    <h5 style="color: #1A4D2E; margin: 0 0 15px 0; font-size: 1.2rem;">
                        üè¢ ORGANIZATION SETTINGS
                    </h5>

                    <!-- Account Settings -->
                    <div style="background: #F1F8F6; border-left: 4px solid #26A69A; padding: 15px; margin: 10px 0 10px 20px; border-radius: 6px;">
                        <div style="color: #2D6A4F; font-weight: bold; margin-bottom: 10px; font-size: 1.05rem;">üìä Account Settings</div>
                        <div style="padding-left: 20px; color: #455A64; line-height: 1.8;">
                            ‚Ä¢ Organization Profile<br>
                            ‚Ä¢ Billing Information<br>
                            ‚Ä¢ Subscription Plan
                        </div>
                    </div>

                    <!-- Channels -->
                    <div style="background: #F1F8F6; border-left: 4px solid #26A69A; padding: 15px; margin: 10px 0 10px 20px; border-radius: 6px;">
                        <div style="color: #2D6A4F; font-weight: bold; margin-bottom: 10px; font-size: 1.05rem;">üì± Channels</div>
                        <div style="padding-left: 20px; color: #455A64; line-height: 1.8;">
                            ‚Ä¢ WhatsApp Business API<br>
                            ‚Ä¢ Email (SMTP/IMAP)<br>
                            ‚Ä¢ Instagram<br>
                            ‚Ä¢ Facebook Messenger<br>
                            ‚Ä¢ Telegram, SMS
                        </div>
                    </div>

                    <!-- Security -->
                    <div style="background: #F1F8F6; border-left: 4px solid #26A69A; padding: 15px; margin: 10px 0 10px 20px; border-radius: 6px;">
                        <div style="color: #2D6A4F; font-weight: bold; margin-bottom: 10px; font-size: 1.05rem;">üîí Security</div>
                        <div style="padding-left: 20px; color: #455A64; line-height: 1.8;">
                            ‚Ä¢ Two-Factor Authentication<br>
                            ‚Ä¢ API Keys<br>
                            ‚Ä¢ Webhook Security<br>
                            ‚Ä¢ Session Management
                        </div>
                    </div>

                    <!-- Notifications -->
                    <div style="background: #F1F8F6; border-left: 4px solid #26A69A; padding: 15px; margin: 10px 0 10px 20px; border-radius: 6px;">
                        <div style="color: #2D6A4F; font-weight: bold; margin-bottom: 10px; font-size: 1.05rem;">üîî Notifications</div>
                        <div style="padding-left: 20px; color: #455A64; line-height: 1.8;">
                            ‚Ä¢ Email Notifications<br>
                            ‚Ä¢ In-App Notifications<br>
                            ‚Ä¢ Slack Integration<br>
                            ‚Ä¢ Notification Rules
                        </div>
                    </div>

                    <!-- Team Management -->
                    <div style="background: #F1F8F6; border-left: 4px solid #26A69A; padding: 15px; margin: 10px 0 10px 20px; border-radius: 6px;">
                        <div style="color: #2D6A4F; font-weight: bold; margin-bottom: 10px; font-size: 1.05rem;">üë• Team Management</div>
                        <div style="padding-left: 20px; color: #455A64; line-height: 1.8;">
                            ‚Ä¢ Team Members<br>
                            ‚Ä¢ Roles & Permissions<br>
                            ‚Ä¢ Teams/Groups<br>
                            ‚Ä¢ Access Control
                        </div>
                    </div>

                    <!-- Preferences -->
                    <div style="background: #F1F8F6; border-left: 4px solid #26A69A; padding: 15px; margin: 10px 0 10px 20px; border-radius: 6px;">
                        <div style="color: #2D6A4F; font-weight: bold; margin-bottom: 10px; font-size: 1.05rem;">‚öôÔ∏è Preferences</div>
                        <div style="padding-left: 20px; color: #455A64; line-height: 1.8;">
                            ‚Ä¢ Timezone & Language<br>
                            ‚Ä¢ Date/Time Format<br>
                            ‚Ä¢ UI Customization
                        </div>
                    </div>
                </div>

                <!-- USER SETTINGS -->
                <div style="background: white; border-left: 5px solid #2D6A4F; border-radius: 8px; padding: 20px; box-shadow: 0 2px 8px rgba(45, 106, 79, 0.15);">
                    <h5 style="color: #1A4D2E; margin: 0 0 15px 0; font-size: 1.2rem;">
                        üë§ USER SETTINGS
                    </h5>
                    <div style="padding-left: 20px; color: #455A64; line-height: 2;">
                        ‚Ä¢ Profile<br>
                        ‚Ä¢ Notification Preferences<br>
                        ‚Ä¢ Privacy Settings<br>
                        ‚Ä¢ Display Preferences
                    </div>
                </div>
            </div>

            <h3>üì° API Endpoints (Settings)</h3>

            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Endpoint</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/settings/organization</code></td>
                            <td>Get organization settings</td>
                        </tr>
                        <tr>
                            <td>PUT</td>
                            <td><code>/api/settings/organization</code></td>
                            <td>Update organization settings</td>
                        </tr>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/settings/channels</code></td>
                            <td>Get all channel connections</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/settings/channels/:channel</code></td>
                            <td>Connect new channel</td>
                        </tr>
                        <tr>
                            <td>DELETE</td>
                            <td><code>/api/settings/channels/:id</code></td>
                            <td>Disconnect channel</td>
                        </tr>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/settings/security</code></td>
                            <td>Get security settings</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/settings/security/2fa</code></td>
                            <td>Enable 2FA</td>
                        </tr>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/settings/api-keys</code></td>
                            <td>Get API keys</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/settings/api-keys</code></td>
                            <td>Create new API key</td>
                        </tr>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/settings/team</code></td>
                            <td>Get team members</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/settings/team/invite</code></td>
                            <td>Invite team member</td>
                        </tr>
                        <tr>
                            <td>PUT</td>
                            <td><code>/api/settings/team/:userId/role</code></td>
                            <td>Update member role</td>
                        </tr>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/settings/notifications</code></td>
                            <td>Get notification preferences</td>
                        </tr>
                        <tr>
                            <td>PUT</td>
                            <td><code>/api/settings/notifications</code></td>
                            <td>Update notification preferences</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="see-also">
                <h3>üîó See Also</h3>
                <p>
                    <a href="#frame4">‚Üí Frame 4: Brand Kit System</a> |
                    <a href="#frame5">‚Üí Frame 5: Beezora AI Configuration</a>
                </p>
            </div>
        </div>

        <!-- FRAME 4: BRAND KIT SYSTEM -->
        <div id="frame4" class="frame">
            <h2>üé® FRAME 4: Brand Kit System</h2>

            <h3>üèóÔ∏è Brand Kit Components</h3>

            <div class="grid-2">
                <div class="card">
                    <h4>Visual Identity</h4>
                    <ul>
                        <li><strong>Logo:</strong> Primary, secondary, favicon</li>
                        <li><strong>Colors:</strong> Primary, secondary, accent (6 colors)</li>
                        <li><strong>Fonts:</strong> Headings, body text</li>
                        <li><strong>Images:</strong> Brand imagery library</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>Template Branding</h4>
                    <ul>
                        <li><strong>Email Templates:</strong> Header, footer, styling</li>
                        <li><strong>WhatsApp Templates:</strong> Signature, branding</li>
                        <li><strong>Signatures:</strong> Team member signatures</li>
                        <li><strong>Social Media:</strong> Auto-branded responses</li>
                    </ul>
                </div>
            </div>

            <h3>üíæ Database Schema</h3>

            <div class="card">
                <h4>brand_kits</h4>
                <div class="code-block">CREATE TABLE brand_kits (
  id BIGSERIAL PRIMARY KEY,
  organization_id BIGINT NOT NULL REFERENCES organizations(id),

  name VARCHAR(255) DEFAULT 'Primary Brand Kit',

  -- Logo files (S3 URLs)
  logo_primary_url VARCHAR(500),
  logo_secondary_url VARCHAR(500),
  favicon_url VARCHAR(500),

  -- Colors (hex codes)
  color_primary VARCHAR(7),
  color_secondary VARCHAR(7),
  color_accent VARCHAR(7),
  color_text VARCHAR(7),
  color_background VARCHAR(7),
  color_error VARCHAR(7),

  -- Typography
  font_heading VARCHAR(100), -- 'Roboto', 'Open Sans', etc.
  font_body VARCHAR(100),

  -- Email template customization
  email_header_html TEXT,
  email_footer_html TEXT,
  email_signature TEXT,

  -- Social branding
  social_signature TEXT,

  -- Metadata
  is_active BOOLEAN DEFAULT TRUE,

  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),

  INDEX idx_brand_kits_org (organization_id)
);</div>
            </div>

            <h3>üì° API Endpoints (Brand Kit)</h3>

            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Endpoint</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/brand-kit</code></td>
                            <td>Get active brand kit</td>
                        </tr>
                        <tr>
                            <td>PUT</td>
                            <td><code>/api/brand-kit</code></td>
                            <td>Update brand kit</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/brand-kit/logo</code></td>
                            <td>Upload logo</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/brand-kit/preview-email</code></td>
                            <td>Preview email with branding</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="see-also">
                <h3>üîó See Also</h3>
                <p>
                    <a href="#frame5">‚Üí Frame 5: Beezora AI Configuration</a> |
                    <a href="#frame6">‚Üí Frame 6: Billing & Subscriptions</a>
                </p>
            </div>
        </div>

        <!-- FRAME 5: BEEZORA AI CONFIGURATION -->
        <div id="frame5" class="frame">
            <h2>ü§ñ FRAME 5: Beezora AI Configuration</h2>

            <h3>üéØ Beezora Personality Settings</h3>

            <div class="grid-2">
                <div class="card">
                    <h4>Personality Traits</h4>
                    <ul>
                        <li><strong>Tone:</strong> Professional, Friendly, Casual, Formal</li>
                        <li><strong>Verbosity:</strong> Concise, Balanced, Detailed</li>
                        <li><strong>Formality:</strong> Formal, Semi-formal, Casual</li>
                        <li><strong>Emoji Usage:</strong> None, Minimal, Moderate, Frequent</li>
                        <li><strong>Response Style:</strong> Direct, Conversational, Instructive</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>Knowledge Base</h4>
                    <ul>
                        <li><strong>Company Info:</strong> About, products, services</li>
                        <li><strong>FAQs:</strong> Common questions & answers</li>
                        <li><strong>Policies:</strong> Returns, shipping, privacy</li>
                        <li><strong>Custom Data:</strong> Industry-specific knowledge</li>
                        <li><strong>Training Documents:</strong> PDF, text uploads</li>
                    </ul>
                </div>
            </div>

            <h3>üíæ Database Schema</h3>

            <div class="card">
                <h4>beezora_config</h4>
                <div class="code-block">CREATE TABLE beezora_config (
  id BIGSERIAL PRIMARY KEY,
  organization_id BIGINT NOT NULL UNIQUE REFERENCES organizations(id),

  -- Personality settings
  tone VARCHAR(50) DEFAULT 'friendly',
  verbosity VARCHAR(50) DEFAULT 'balanced',
  formality VARCHAR(50) DEFAULT 'semi-formal',
  emoji_usage VARCHAR(50) DEFAULT 'minimal',

  -- Behavior
  auto_response_enabled BOOLEAN DEFAULT FALSE,
  auto_response_delay_seconds INT DEFAULT 5,

  -- Knowledge base
  company_description TEXT,
  faq_data JSONB DEFAULT '[]',
  -- [{ question, answer, category }]

  custom_instructions TEXT,
  -- Additional instructions for Beezora

  -- Training data
  training_documents JSONB DEFAULT '[]',
  -- [{ title, s3_url, uploadedAt }]

  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),

  INDEX idx_beezora_config_org (organization_id)
);</div>
            </div>

            <h3>üì° API Endpoints (Beezora)</h3>

            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Endpoint</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/beezora/config</code></td>
                            <td>Get Beezora configuration</td>
                        </tr>
                        <tr>
                            <td>PUT</td>
                            <td><code>/api/beezora/config</code></td>
                            <td>Update configuration</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/beezora/knowledge-base</code></td>
                            <td>Add FAQ or knowledge item</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/beezora/train</code></td>
                            <td>Upload training document</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/beezora/test</code></td>
                            <td>Test Beezora response</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="see-also">
                <h3>üîó See Also</h3>
                <p>
                    <a href="#frame6">‚Üí Frame 6: Billing & Subscriptions</a>
                </p>
            </div>
        </div>

        <!-- FRAME 6: BILLING & SUBSCRIPTIONS -->
        <div id="frame6" class="frame">
            <h2>üí≥ FRAME 6: Billing & Subscription Management</h2>

            <h3>üìä Subscription Tiers</h3>

            <table>
                <thead>
                    <tr>
                        <th>Plan</th>
                        <th>Price</th>
                        <th>Features</th>
                        <th>Limits</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong>Business</strong></td>
                        <td>$79/mo</td>
                        <td>Core features, 2 channels, basic automations</td>
                        <td>1,000 contacts, 5K messages/mo</td>
                    </tr>
                    <tr>
                        <td><strong>Organisation</strong></td>
                        <td>$149/mo</td>
                        <td>All channels, advanced automations, team features</td>
                        <td>10,000 contacts, 50K messages/mo</td>
                    </tr>
                    <tr>
                        <td><strong>Premium</strong></td>
                        <td>$299/mo</td>
                        <td>Everything + white-label, priority support</td>
                        <td>Unlimited contacts, 200K messages/mo</td>
                    </tr>
                </tbody>
            </table>

            <h3>üõí Add-ons Available</h3>

            <div class="grid-3">
                <div class="card">
                    <h4>Additional Channels</h4>
                    <ul>
                        <li>WhatsApp: $29/mo</li>
                        <li>Instagram: $19/mo</li>
                        <li>Messenger: $19/mo</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>Advanced Features</h4>
                    <ul>
                        <li>AI Credits: $49/mo</li>
                        <li>Premium Support: $99/mo</li>
                        <li>Custom Integrations: $199/mo</li>
                    </ul>
                </div>

                <div class="card">
                    <h4>Capacity Upgrades</h4>
                    <ul>
                        <li>+10K contacts: $29/mo</li>
                        <li>+50K messages: $49/mo</li>
                        <li>+5 team members: $39/mo</li>
                    </ul>
                </div>
            </div>

            <h3>üíæ Database Schema</h3>

            <div class="card">
                <h4>subscriptions</h4>
                <div class="code-block">CREATE TABLE subscriptions (
  id BIGSERIAL PRIMARY KEY,
  organization_id BIGINT NOT NULL UNIQUE REFERENCES organizations(id),

  -- Plan details
  plan VARCHAR(50) NOT NULL, -- 'business', 'organisation', 'premium'
  status VARCHAR(50) DEFAULT 'active',
  -- 'active', 'cancelled', 'past_due', 'trial'

  -- Billing
  stripe_subscription_id VARCHAR(255),
  stripe_customer_id VARCHAR(255),

  -- Dates
  trial_ends_at TIMESTAMP,
  current_period_start TIMESTAMP,
  current_period_end TIMESTAMP,
  cancelled_at TIMESTAMP,

  -- Pricing
  amount_cents INT NOT NULL,
  currency VARCHAR(3) DEFAULT 'USD',

  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),

  INDEX idx_subscriptions_org (organization_id),
  INDEX idx_subscriptions_stripe (stripe_subscription_id)
);</div>
            </div>

            <div class="card">
                <h4>add_ons</h4>
                <div class="code-block">CREATE TABLE add_ons (
  id BIGSERIAL PRIMARY KEY,
  subscription_id BIGINT NOT NULL REFERENCES subscriptions(id),

  add_on_type VARCHAR(100) NOT NULL,
  -- 'channel_whatsapp', 'ai_credits', 'extra_contacts', etc.

  quantity INT DEFAULT 1,

  amount_cents INT NOT NULL,

  status VARCHAR(50) DEFAULT 'active',

  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW(),

  INDEX idx_add_ons_subscription (subscription_id)
);</div>
            </div>

            <h3>üì° API Endpoints (Billing)</h3>

            <div class="card">
                <table>
                    <thead>
                        <tr>
                            <th>Method</th>
                            <th>Endpoint</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/billing/subscription</code></td>
                            <td>Get current subscription</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/billing/subscribe</code></td>
                            <td>Create new subscription</td>
                        </tr>
                        <tr>
                            <td>PUT</td>
                            <td><code>/api/billing/subscription/upgrade</code></td>
                            <td>Upgrade plan</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/billing/subscription/cancel</code></td>
                            <td>Cancel subscription</td>
                        </tr>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/billing/invoices</code></td>
                            <td>Get invoice history</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/billing/add-ons</code></td>
                            <td>Purchase add-on</td>
                        </tr>
                        <tr>
                            <td>GET</td>
                            <td><code>/api/billing/usage</code></td>
                            <td>Get usage metrics</td>
                        </tr>
                        <tr>
                            <td>POST</td>
                            <td><code>/api/billing/payment-method</code></td>
                            <td>Update payment method</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <h3>‚öôÔ∏è AWS Infrastructure</h3>

            <div class="card">
                <h4>Billing Infrastructure Components</h4>
                <ul>
                    <li><strong>Stripe Integration:</strong> Payment processing, subscription management</li>
                    <li><strong>Stripe Webhooks:</strong> Handle payment events (ECS endpoint)</li>
                    <li><strong>RDS PostgreSQL:</strong> Store subscription data</li>
                    <li><strong>Lambda Functions:</strong> Usage tracking, invoice generation</li>
                    <li><strong>CloudWatch Events:</strong> Schedule daily usage calculations</li>
                    <li><strong>SNS:</strong> Payment failure notifications</li>
                </ul>
            </div>

            <div class="see-also">
                <h3>üîó See Also</h3>
                <p>
                    <a href="complete-architecture-map.html">‚Üí Complete Architecture Map</a> |
                    <a href="index.html">‚Üí Back to Home</a>
                </p>
            </div>
        </div>

    </div>

    <!-- BACK TO TOP -->
    <a href="#" class="back-to-top">‚Üë</a>

    <!-- NAVIGATION SCRIPT -->
    <script src="assets/navigation.js"></script>
</body>
</html>
